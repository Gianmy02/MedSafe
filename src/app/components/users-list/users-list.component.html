<div class="users-container">
  <div class="users-header">
    <h2>Elenco Utenti</h2>
    <p class="subtitle">Gestione utenti del sistema MedSafe</p>
  </div>

  <div *ngIf="loading" class="loading">
    <p>Caricamento utenti...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
  </div>

  <div *ngIf="!loading && users.length > 0" class="users-table-container">
    <table class="users-table">
      <thead>
        <tr>
          <th>Nome Completo</th>
          <th>Specializzazione</th>
          <th>Email</th>
          <th>Ruolo</th>
          <th>Stato</th>
          <th>Data Creazione</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of users">
          <td class="user-name">
            <span class="name-icon">ðŸ‘¤</span>
            {{ getDoctorTitle(user.genere) }} {{ user.fullName }}
          </td>
          <td>
            <span class="specialization">{{ formatSpecializzazione(user.specializzazione) }}</span>
          </td>
          <td>{{ user.email }}</td>
          <td>
            <span class="badge" [ngClass]="getRoleBadgeClass(user.role)">
              {{ getRoleLabel(user.role) }}
            </span>
          </td>
          <td>
            <div class="status-toggle" *ngIf="user.role !== 'ADMIN'">
              <label class="switch">
                <input 
                  type="checkbox" 
                  [checked]="user.enabled !== false"
                  (click)="toggleUserStatus(user, $event)"
                >
                <span class="slider"></span>
              </label>
              <span class="status-label" [class.active]="user.enabled !== false">
                {{ user.enabled !== false ? 'âœ“ Attivo' : 'âœ– Disattivo' }}
              </span>
            </div>
            <span *ngIf="user.role === 'ADMIN'" class="badge badge-active">
              âœ“ Sempre Attivo
            </span>
          </td>
          <td>{{ user.createdAt | date: 'dd/MM/yyyy HH:mm' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && users.length === 0" class="no-users">
    <p>Nessun utente trovato</p>
  </div>
</div>
