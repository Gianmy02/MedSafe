<div class="pazienti-container">
  <header class="page-header">
    <h1>Cerca Pazienti</h1>
    <p>Ricerca pazienti per codice fiscale</p>
  </header>

  <!-- Search Form -->
  <div class="search-section card">
    <h2>Ricerca</h2>
    
    <div class="search-form">
      <div class="form-group">
        <label for="searchTerm">Codice Fiscale:</label>
        <input 
          type="text" 
          id="searchTerm"
          [(ngModel)]="searchTerm"
          (keyup.enter)="searchPazienti()"
          class="form-control"
          placeholder="Inserisci codice fiscale del paziente"
          maxlength="16">
        <small class="form-help">Inserisci il codice fiscale completo (16 caratteri)</small>
      </div>

      <div class="button-group">
        <button 
          (click)="searchPazienti()" 
          [disabled]="isLoading || !searchTerm.trim()"
          class="btn btn-primary">
          üîç Cerca Paziente
        </button>
        <button 
          (click)="resetSearch()" 
          class="btn btn-secondary">
          ‚Üª Reset
        </button>
      </div>
    </div>

    <!-- Messages -->
    <div *ngIf="errorMessage" class="alert alert-error">
      {{ errorMessage }}
    </div>
    <div *ngIf="isLoading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Ricerca in corso...</p>
    </div>
  </div>

  <!-- Results -->
  <div *ngIf="pazienti.length > 0" class="results-section">
    <h2>Risultati ({{ pazienti.length }})</h2>
    
    <div class="pazienti-grid">
      <div *ngFor="let paziente of pazienti" class="paziente-card">
        <div class="paziente-icon">üë§</div>
        
        <div class="paziente-info">
          <h3>{{ paziente.codiceFiscale }}</h3>
          
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Numero Referti:</span>
              <span class="value badge">{{ paziente.numeroReferti }}</span>
            </div>
            
            <div class="info-item" *ngIf="paziente.ultimoReferto">
              <span class="label">Ultimo Referto:</span>
              <span class="value">{{ paziente.ultimoReferto }}</span>
            </div>
          </div>

          <div class="card-actions">
            <button 
              (click)="viewReferti(paziente.codiceFiscale)" 
              class="btn btn-accent btn-sm">
              üìã Visualizza Referti
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Section -->
  <div class="info-section card">
    <h3>‚ÑπÔ∏è Informazioni</h3>
    <p>
      Utilizza questa pagina per cercare informazioni sui pazienti registrati nel sistema.
      Inserisci il codice fiscale completo del paziente per visualizzare:
    </p>
    <ul>
      <li>Numero totale di referti associati</li>
      <li>Data dell'ultimo referto caricato</li>
      <li>Accesso rapido alla lista referti del paziente</li>
    </ul>
    <p class="note">
      <strong>Nota:</strong> La ricerca √® basata sul codice fiscale presente nei referti caricati nel sistema.
    </p>
  </div>
</div>
